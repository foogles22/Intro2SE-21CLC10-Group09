{% load my_tags %}
<section>
	<div class="container">
		<div class="main-body">
			<div class="row gutters-sm">
				<div class="col-md-4 mb-3">
					<div class="row card">
						<div class="card-body border border-info">
							<div class="d-flex flex-column align-items-center text-center">
								<img src= "{% if user.profile.profile_img %}{{ user.profile.profile_img.url }}{% endif %}" alt="Admin" style="vertical-align: middle;
                        width: 140px;
                        height: 140px;
                        border-radius: 50%;" alt="Avatar">
								<div class="mt-3">
									<h4>{{user.profile.last_name}}</h4>
									<h5 class="text-info">{{user.profile.role}}</h5>
									<h5 class="text">Joined: {{user.profile.created_at}}</h5>
								</div>
							</div>
						</div>
					</div>
					<div class="row card">
						<div class="d-flex flex-column align-items-center text-center">
							<ul class="list-group border border-info">
								<li class="list-group-item">
									<h6 class="mb-0">
										<i class="fa-solid fa-book-open"></i> Book Borrowing:<span class="text-info">&ensp;{{user|borrowing}}</span>
									</h6>
								</li>
								<li class="list-group-item">
									<h6 class="mb-0">
										<i class="fa-solid fa-book-open"></i> Book Returned:<span class="text-info">&emsp;{{user|returned}}</span>
									</h6>
								</li>
								<li class="list-group-item">
									<h6 class="mb-0">
										<i class="fa-solid fa-book-open"></i> Book Overdued:  <span class="text-info">&ensp;{{user|overdued}}</span>
									</h6>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-md-8">
					<div class="card mb-3">
						<div class="card-body border border-info">
							<div class="row">
								<div class="col-sm-3">
									<h6 class="mb-0">Full Name</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									{{user.profile.first_name}} {{user.profile.last_name}}
								</div>
							</div>
							<hr class="border border-info">
							<div class="row">
								<div class="col-sm-3">
									<h6 class="mb-0">Email</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									{{user.profile.email}}
								</div>
							</div>
							<hr class="border border-info">
							<div class="row">
								<div class="col-sm-3">
									<h6 class="mb-0">Phone</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									{{user.profile.phone}}
								</div>
							</div>
							<hr class="border border-info">
							<div class="row">
								<div class="col-sm-3">
									<h6 class="mb-0">Sex</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									{% if user.profile.sex == '1'%}
									Male
									{% endif %}
									{% if profile.sex == '2'%}
									Female
									{% endif %}
								</div>
							</div>
							<hr class="border border-info">
							<div class="row">
								<div class="col-sm-3">
									<h6 class="mb-0">Date Of Birth</h6>
								</div>
								<div class="col-sm-9 text-secondary">
									{{user.profile.date_of_birth}}
								</div>
							</div>
							<hr class="border border-info">
						</div>
					</div>
					<div class="card border-0">
						<table class="table table-bordered table-mt-4 border border-info" id="myTable" style="text-align: center;">
							<colcategory>
								<col width="25%"/>
								<col width="25%"/>
								<col width="25%"/>
								<col width="25%"/>
							</colcategory>
							<thead class="table-info border border-info">
								<tr>
									<th class="text-center border border-info" scope="col">Book Title</th>
									<th class="text-center border border-info" scope="col">Date Loan</th>
									<th class="text-center border border-info" scope="col">Date Expire</th>
									<th class="text-center border border-info" scope="col">Has Returned</th>
								</tr>
							</thead>
							<tbody class="border border-info">
								<tr >
									{% if user|loan %}
									{% for loan in user|loan %}
									<td class="text-center border border-info"> {{loan.book.title}}</td>
									<td class="text-center border border-info"> {{loan.date_loan}}</td>
									<td class="text-center border border-info"> {{loan.date_expired}}</td>
									<td class="text-center border border-info"><i class="fa-solid fa-x text-danger"></td>
									{% endfor %}
									{% else %}
									<td class="text-center border border-info">None</td>
									<td class="text-center border border-info">None</td>
									<td class="text-center border border-info">None</td>
									<td class="text-center border border-info">None</td>
									{% endif %}
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>