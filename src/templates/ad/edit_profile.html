{% extends 'ad/base.html' %}

{% block Page_content %}

<div class="container mt-3" style = "width: 95%; font-size: 14px;">
    <div class="card">
        <div class="card-body text-center">
            <i class="fa fa-edit text-primary"></i> Edit</a>
        </div>
    </div>
    <form action="{% url 'edit_profile' request.user.id %}" method = "POST" class = "card p-3 mt-1" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="mb-3">
            <label for="first_name" class="control-label">First Name</label>
            <input type="text" id="first_name" name="first_name" class="form-control form-control-sm rounded-0" value="{{profile.first_name}}" required>
        </div>
        <div class="mb-3">
            <label for="last_name" class="control-label">Last Name</label>
            <input type="text" id="last_name" name="last_name" class="form-control form-control-sm rounded-0" value="{{profile.last_name}}" required>
        </div>
        <div class="mb-3">
            <label for="email" class="control-label">Email</label>
            <input type="text" id="email" name="email" class="form-control form-control-sm rounded-0" value="{{profile.email}}">
        </div>
        <div class="mb-3">
            <label for="phone" class="control-label">Phone</label>
            <input type="text" id="phone" name="phone" class="form-control form-control-sm rounded-0" value="{{profile.phone}}">
        </div>
        <div class="mb-3">
            <label for="date_of_birth" class="control-label">Date of birth</label>
            <input type="date" id="date_of_birth" name="date_of_birth" class="form-control form-control-sm rounded-0" value="{{profile.date_of_birth|date:'Y-m-d' }}">
        </div>
        <div class="mb-3">
            <label for="sex" class="control-label">Sex</label>
            <select type="text" id="sex" name="sex" class="form-select form-select-sm rounded-0">
                {% if profile.sex == '1'%}
                <option value="1" selected>Male</option>
                {% else %}
                <option value="1">Male</option>
                {% endif %}
                {% if profile.sex == '2'%}
                <option value="2" selected>Female</option>
                {% else %}
                <option value="2">Female</option>
                {% endif %}
            </select>
        </div>
        <div class="mb-3">
            <label for="profile_img" class="control-label">Profile Image</label>
            <input type="file" id="profile_img" name="profile_img" class="form-control form-control-sm rounded-0">
            
            <img id="imagePreview" src="{% if profile.profile_img %}{{ profile.profile_img.url }}{% endif %}" width="200" height="200">
        </div>
        
        <div class="mt-3">
            <input class="btn btn-dark" type="submit" value="Save">
        </div>
    </form>
</div>
<script>
    // Show image preview when a file is selected
    $("#profile_img").on("change", function() {
      const fileInput = this;
      if (fileInput.files && fileInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
          $("#imagePreview").attr("src", e.target.result);
        };
        reader.readAsDataURL(fileInput.files[0]);
      }
    });
  </script>
{% endblock Page_content %}

        