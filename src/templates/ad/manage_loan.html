{% extends 'ad/base.html' %}

{% block Page_content %}

<div class="container mt-3" style = "width: 95%; font-size: 14px;">
    <div class="card border-dark">
        <div class="card-body text-center">
            <i class="fa fa-plus text-success"> Add Transaction</i>
        </div>
    </div>
    <form action="{% url 'save_loan' %}" method = "POST" autocomplete="off" class = "card p-3 mt-1 border-dark was-validated">
        {% csrf_token %}
        <div class="input-group mb-3 mt-3">
            <span class="input-group-text border-dark" >User ID</span>
            <input type="text" id="identity" name="identity" class="form-control" placeholder="User Identity" value="{{loan.user.profile.identity}}" required>
            <ul class ="list-group rounded-0" style="list-style: none;" id="hint-list-identity"></ul>
        </div>
        <div class="input-group mb-3 mt-3">
            <span class="input-group-text border-dark">Book Title</span>
            <input type="text" id="book" name="book" class="form-control" placeholder="Book Title" value="{{loan.book}}" required>
            <ul class ="list-group rounded-0" style="list-style: none;" id="hint-list-book"></ul>
        </div>
        
        <div class="d-flex justify-content-between mt-3">
            <a href="{% url 'loan' %}" class="btn btn-dark">Back</a>    
            <input class="btn btn-dark" type="submit" value="Add">
        </div>
    </form>

</div>
<script>
    let blurTimeout;

    $(document).ready(function() {
        $("#identity").on("input", function() {
            showHints('identity', 'hint-list-identity', "/identity_search/");
        });
        $("#identity").on("blur", function() {
            clearTimeout(blurTimeout);
            blurTimeout = setTimeout(function() {
              $("#hint-list-identity").empty();
            }, 200);
          });

        $("#book").on("input", function() {
            showHints('book', 'hint-list-book', "/book_search/");
        });
        $("#book").on("blur", function() {
            clearTimeout(blurTimeout);
            blurTimeout = setTimeout(function() {
              $("#hint-list-book").empty();
            }, 200);
          });
    });
</script>
{% endblock Page_content %}

        