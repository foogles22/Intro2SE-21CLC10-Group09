{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Wellib system - Book for life</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'css/open-iconic-bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">

    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">

    <link rel="stylesheet" href="{% static 'css/aos.css' %}">

    <link rel="stylesheet" href="{% static 'css/ionicons.min.css' %}">

    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery.timepicker.css' %}">


    <link rel="stylesheet" href="{% static 'css/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'css/icomoon.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/searchbar.css' %}">
    <link rel="stylesheet" href="{% static 'css/filter.css' %}">

    <link href="lib/slick/slick.css" rel="stylesheet">
    <link href="lib/slick/slick-theme.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/d7c6a7cb66.js" crossorigin="anonymous"></script>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>

</head>

<body>
    {% include 'homepage/navbar.html' %}


    <section class="home-slider owl-carousel" style = "height: 380px;">
        <div class="slider-item" style= "height: 380px; background-image: url('{% static "images/booklist.jpg" %}')"></div>
        <div class="slider-item" style= "height: 380px; background-image: url('{% static "images/boundbook.jpg" %}')"></div>
        <div class="slider-item" style= "height: 380px; background-image: url('{% static "images/booktop.jpg" %}')"></div>
    </section>
    


    <section class="ftco-section">
        <div class="container">
            <div class="row flex-lg-nowrap">
                <div class="col-12 col-lg-auto mb-3" style="width: 200px;">
                    <div class="card p-3"
                        style="box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px;  border-radius: 15px">
                        <div class="e-navlist e-navlist--active-bg">
                            <ul class="nav">
                                <li class="nav-item"><a class="nav-link px-2 active" href="#"><i
                                            class="fa fa-fw fa-bar-chart mr-1"></i><span>Overview</span></a></li>
                                <li class="nav-item"><a class="nav-link px-2"
                                        href="https://www.bootdey.com/snippets/view/bs4-crud-users" target="__blank"><i
                                            class="fa fa-fw fa-th mr-1"></i><span>CRUD</span></a></li>
                                <li class="nav-item"><a class="nav-link px-2"
                                        href="https://www.bootdey.com/snippets/view/bs4-edit-profile-page"
                                        target="__blank"><i class="fa fa-fw fa-cog mr-1"></i><span>Settings</span></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="row">
                        <div class="col mb-3">
                            <div class="card"
                                style="box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px; border-radius: 15px;">
                                <div class="card-body">
                                    <div class="e-profile">
                                        <div class="row">
                                            <div class="col-12 col-sm-auto mb-3">
                                                <div class="mx-auto" style="width: 170px;">
                                                    <div id = "imagePreview" class="d-flex justify-content-center align-items-center rounded" style="height: 170px; background-image:  url('{{profile.profile_img.url}}');  background-size: cover; background-position: center center;">
                                                    </div>
                                                </div>
                                            </div>
                                            <div
                                                class="col d-flex flex-column flex-sm-row justify-content-between mb-3">
                                                <div class="text-center text-sm-left mb-2 mb-sm-0">
                                                    <h4 class="pt-sm-2 pb-1 mb-0 text-nowrap">{{request.user.profile.first_name}}&ensp;{{request.user.profile.last_name}}</h4>
                                                    <p class="mb-0">{{profile.email}}</p>
                                                    <!-- form -->
                                                    <form action="{% url 'edit_avatar' request.user.id %}" method= "POST" enctype="multipart/form-data">
                                                        {% csrf_token %}
                                                        <input id="profile_img" type="file" name="profile_img" hidden>
                                                        <div class="mt-2">
                                                            <button id="avabtn" class="btn btn-primary" type="button">
                                                                <i class="fa fa-fw fa-camera"></i>
                                                                <span>Change Photo</span>
                                                            </button>
                                                        </div>
                                                        <div class="row" style = "padding-bottom: 30px; margin-top: 20px;">
                                                            <div class="col d-flex justify-content-start">
                                                                <button class="btn btn-primary" type="submit">Save
                                                                    Changes</button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                    <script>
                                                            document.addEventListener('DOMContentLoaded', function() {
                                                            const uploadButton = document.getElementById('avabtn');
                                                            const fileInput = document.getElementById('profile_img');
                                                            
                                                            uploadButton.addEventListener('click', function() {
                                                                fileInput.click();
                                                            });
                                                        });
                                                        $("#profile_img").on("change", function() {
                                                            const fileInput = this;
                                                            if (fileInput.files && fileInput.files[0]) {
                                                                const reader = new FileReader();
                                                                reader.onload = function(e) {
                                                                $("#imagePreview").css("background-image", `url(${e.target.result})`);
                                                                };
                                                                reader.readAsDataURL(fileInput.files[0]);
                                                            }
                                                        });
                                                    </script>
                                                </div>
                                                <div class="text-center text-sm-right">
                                                    <span class="badge badge-secondary">{{profile.identity}}</span>
                                                    <div class="text-muted"><small>Joined {{profile.date_joined}}</small></div>
                                                </div>
                                            </div>
                                        </div>
                                        <ul class="nav nav-tabs">
                                            <li class="nav-item"><a href="" class="active nav-link">Settings</a></li>
                                        </ul>
                                        <div class="tab-content pt-3">
                                            <div class="tab-pane active">
                                                <!-- Form -->
                                                <form class="form" action="{% url 'edit_profile' request.user.id %}" method = "POST">
                                                    {% csrf_token %}
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>First Name</label>
                                                                    </div>
                                                                    <input type="text" name="first_name"
                                                                        placeholder="First name" value="{{profile.first_name}}" required>
                                                                </div>

                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Last Name</label>
                                                                    </div>
                                                                    <input type="text" name="last_name"
                                                                        placeholder="Last name" value="{{profile.last_name}}" required>
                                                                </div>

                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Sex</label>
                                                                    </div>
                                                                    <select type="text" id="sex" name="sex" class="username">
                                                                        {% if profile.sex == '1'%}
                                                                        <option value="1" selected>Male</option>
                                                                        {% else %}
                                                                        <option value="1">Male</option>
                                                                        {% endif %}
                                                                        {% if profile.sex == '2'%}
                                                                        <option value="2" selected>Female</option>
                                                                        {% else %}
                                                                        <option value="2">Female</option>
                                                                        {% endif %}
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Email</label>
                                                                    </div>
                                                                    <input type="text" name="email" placeholder="Email@"
                                                                    value="{{profile.email}}" required>
                                                                </div>
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Phone</label>
                                                                    </div>
                                                                    <input type="text" name="phone"
                                                                        placeholder="0000000000" value="{{profile.phone}}" required>
                                                                </div>
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Date Of Birth</label>
                                                                    </div>
                                                                    <input type="date" name="date_of_birth"
                                                                        value="{{profile.date_of_birth|date:'Y-m-d' }}" required>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col mb-3">
                                                                    <div class="form-group">
                                                                        <label>About</label>
                                                                    </div>
                                                                    <textarea rows="5" placeholder="My Bio" name = "bio">{{profile.bio}}</textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    
                                                    </div>
                                                    <div class="row" style = "padding-bottom: 30px;">
                                                        <div class="col d-flex justify-content-end">
                                                            <button class="btn btn-primary" type="submit">Save Changes</button>
                                                        </div>
                                                    </div>
                                                </form>

                                                <form action="{% url 'change_password' %}" method = "POST">
                                                    {% csrf_token %}
                                                    <div class="nav nav-tabs" style="margin-bottom: 30px"></div>
                                                    <div class="row">
                                                        <div class="col-12 col-sm-6 mb-3">
                                                            <h5 class="mb-2"><b>Change Password</b></h5>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Current Password</label>
                                                                    </div>
                                                                    <input name= "old_password" type="password" placeholder="••••••">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>New Password</label>
                                                                    </div>
                                                                    <input name="new_password1" type="password" placeholder="••••••">
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Confirm Password</label>
                                                                    </div>
                                                                    <input name="new_password2" type="password" placeholder="••••••">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-12 col-sm-5 offset-sm-1 mb-3">
                                                            <h5 class="mb-2"><b>Keeping in Touch</b></h5>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <label>Email Notifications</label>
                                                                    <div class="custom-controls-stacked px-2">
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input type="checkbox"
                                                                                class="custom-control-input"
                                                                                id="notifications-blog" checked="">
                                                                            <label class="custom-control-label"
                                                                                for="notifications-blog">Blog
                                                                                posts</label>
                                                                        </div>
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input type="checkbox"
                                                                                class="custom-control-input"
                                                                                id="notifications-news" checked="">
                                                                            <label class="custom-control-label"
                                                                                for="notifications-news">Newsletter</label>
                                                                        </div>
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input type="checkbox"
                                                                                class="custom-control-input"
                                                                                id="notifications-offers" checked="">
                                                                            <label class="custom-control-label"
                                                                                for="notifications-offers">Personal
                                                                                Offers</label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col d-flex justify-content-end">
                                                            <button class="btn btn-primary" type="submit">Save
                                                                Changes</button>
                                                        </div>
                                                    </div>
                                                </form>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-3 mb-3">
                            <div class="card mb-3"
                                style="box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px;  border-radius: 15px">
                                <div class="card-body">
                                    <div class="px-xl-3">
                                        <button class="btn btn-block btn-secondary">
                                            <i class="fa fa-sign-out"></i>
                                            <span>Logout</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card"
                                style="box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px;  border-radius: 15px">
                                <div class="card-body">
                                    <h6 class="card-title font-weight-bold">Support</h6>
                                    <p class="card-text">Get fast, free help from our friendly assistants.</p>
                                    <a href="about.html"><button type="button" class="btn btn-primary">Contact
                                            Us</button></a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </section>


    <footer class="ftco-footer ftco-section img">
		<div class="overlay"></div>
		<div class="container">
			<div class="row mb-5">
				<div class="col-lg-3 col-md-6 mb-5 mb-md-5">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">About Us</h2>
						<p>We are a hub of knowledge, creativity, and
                            community, dedicated to providing an enriching experience
                            for all of our visitors.</p>
						<ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
							<li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
							<li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
							<li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
						</ul>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 mb-5 mb-md-5">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Recent News</h2>
						{% for blog in blogs_footer%}
						<div class="block-21 mb-4 d-flex">
							<a href = "{%url 'blog' blog.id%}" class="blog-img mr-4" style="background-image: url('{{blog.image_blog.url}}');"></a>
							<div class="text">
								<h3 class="heading"><a href="{%url 'blog' blog.id%}">{{blog.title}}</a>
								</h3>
								<div class="meta">
									<div><a href="#"><span class="icon-calendar"></span> {{blog.created_at}}</a></div>
									<div><a href="#"><span class="icon-person"></span> {{blog.writer}}</a></div>
									<div><a href="#"><span class="icon-chat"></span> 19</a></div>
								</div>
							</div>
						</div>
						{% endfor %}
					</div>
				</div>
				<div class="col-lg-2 col-md-6 mb-5 mb-md-5">
					<div class="ftco-footer-widget mb-4 ml-md-4">
						<h2 class="ftco-heading-2">Category</h2>
						<ul class="list-unstyled">
							{% for category in categories_footer%}
							<li><a href="{% url 'searchbook' category.id %}" class="py-2 d-block">{{category.name}}</a></li>
							{% endfor %}
						</ul>
					</div>
				</div>
				<div class="col-lg-3 col-md-6 mb-5 mb-md-5">
					<div class="ftco-footer-widget mb-4">
						<h2 class="ftco-heading-2">Have a Questions?</h2>
						<div class="block-23 mb-3">
							<ul>
								<li><span class="icon icon-map-marker"></span><span class="text">2227 Nguyen Van Cu street, District 5, Ho Chi Minh city</span></li>
								<li><a href="#"><span class="icon icon-phone"></span><span class="text">+2 392 3929
											210</span></a></li>
								<li><a href="#"><span class="icon icon-envelope"></span><span
											class="text">wellib@gmail.com</span></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12 text-center">

					<p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						Copyright &copy;
						<script>document.write(new Date().getFullYear());</script> All rights reserved | This template
						is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com"
							target="_blank">Colorlib</a>
						<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
					</p>
				</div>
			</div>
		</div>
	</footer>



    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
            <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
            <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#F96D00" />
        </svg></div>


        <script src="{% static 'js/jquery.min.js' %}"></script>
        <script src="{% static 'js/jquery-migrate-3.0.1.min.js' %}"></script>
        <script src="{% static 'js/popper.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>
        <script src="{% static 'js/jquery.easing.1.3.js' %}"></script>
        <script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
        <script src="{% static 'js/jquery.stellar.min.js' %}"></script>
        <script src="{% static 'js/owl.carousel.min.js' %}"></script>
        <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
        <script src="{% static 'js/aos.js' %}"></script>
        <script src="{% static 'js/jquery.animateNumber.min.js' %}"></script>
        <script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
        <script src="{% static 'js/jquery.timepicker.min.js' %}"></script>
        <script src="{% static 'js/scrollax.min.js' %}"></script>
        <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
        <script src="{% static 'js/google-map.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>

</body>

</html>